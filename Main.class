// Source code is decompiled from a .class file using FernFlower decompiler.
import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;

public class Main {
   private static final String DB_URL = "jdbc:mysql://localhost:3306/toko";
   private static final String DB_USER = "root";
   private static final String DB_PASS = "";

   public Main() {
   }

   public static void main(String[] var0) {
      try {
         Class.forName("com.mysql.cj.jdbc.Driver");
      } catch (ClassNotFoundException var10) {
         System.err.println("Driver JDBC tidak ditemukan!");
         return;
      }

      try {
         Connection var1 = DriverManager.getConnection("jdbc:mysql://localhost:3306/toko", "root", "");

         try {
            Scanner var2 = new Scanner(System.in);

            try {
               System.out.print("Kode barang (max 10): ");
               String var3 = var2.nextLine().trim();
               System.out.print("Nama barang: ");
               String var4 = var2.nextLine().trim();
               System.out.print("Harga: ");
               int var5 = Integer.parseInt(var2.nextLine().trim());
               System.out.print("Stok: ");
               int var6 = Integer.parseInt(var2.nextLine().trim());
               insertBarang(var1, var3, var4, var5, var6);
               tampilView(var1);
            } catch (Throwable var9) {
               try {
                  var2.close();
               } catch (Throwable var8) {
                  var9.addSuppressed(var8);
               }

               throw var9;
            }

            var2.close();
         } catch (Throwable var11) {
            if (var1 != null) {
               try {
                  var1.close();
               } catch (Throwable var7) {
                  var11.addSuppressed(var7);
               }
            }

            throw var11;
         }

         if (var1 != null) {
            var1.close();
         }
      } catch (SQLException var12) {
         System.err.println("Koneksi/SQL error: " + var12.getMessage());
      }

   }

   private static void insertBarang(Connection var0, String var1, String var2, int var3, int var4) {
      String var5 = "{ CALL insert_barang(?, ?, ?, ?) }";

      try {
         CallableStatement var6 = var0.prepareCall(var5);

         try {
            var6.setString(1, var1);
            var6.setString(2, var2);
            var6.setInt(3, var3);
            var6.setInt(4, var4);
            var6.executeUpdate();
            System.out.println("✔️  Data berhasil disimpan!");
         } catch (Throwable var10) {
            if (var6 != null) {
               try {
                  var6.close();
               } catch (Throwable var9) {
                  var10.addSuppressed(var9);
               }
            }

            throw var10;
         }

         if (var6 != null) {
            var6.close();
         }
      } catch (SQLException var11) {
         System.err.println("❌ Gagal insert: " + var11.getMessage());
      }

   }

   private static void tampilView(Connection var0) {
      String var1 = "SELECT * FROM view_barang";

      try {
         Statement var2 = var0.createStatement();

         try {
            ResultSet var3 = var2.executeQuery(var1);

            try {
               System.out.printf("%-10s %-25s %10s %6s %12s%n", "Kode", "Nama", "Harga", "Stok", "TotalNilai");
               System.out.println("-----------------------------------------------------------------------");

               while(var3.next()) {
                  System.out.printf("%-10s %-25s %10d %6d %12d%n", var3.getString("kode"), var3.getString("nama"), var3.getInt("harga"), var3.getInt("stok"), var3.getInt("total_nilai"));
               }
            } catch (Throwable var8) {
               if (var3 != null) {
                  try {
                     var3.close();
                  } catch (Throwable var7) {
                     var8.addSuppressed(var7);
                  }
               }

               throw var8;
            }

            if (var3 != null) {
               var3.close();
            }
         } catch (Throwable var9) {
            if (var2 != null) {
               try {
                  var2.close();
               } catch (Throwable var6) {
                  var9.addSuppressed(var6);
               }
            }

            throw var9;
         }

         if (var2 != null) {
            var2.close();
         }
      } catch (SQLException var10) {
         System.err.println("❌ Gagal menampilkan data: " + var10.getMessage());
      }

   }
}
